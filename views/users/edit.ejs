<% include ../partials/header.ejs %>

    <div class="row justify-content-center">
        <h1 class="text-center">Edit user <%= user.username %></h1>
        <br>
        <div class="col-md-4 col-md-offset-4">
            <form action="/users/<%= user.id %>?_method=PUT" method="POST" enctype="multipart/form-data">
                
                <div class="form-group">
                    <input type="text" class="form-control formInput" name="username" placeholder="Username" value="<%= user.username %>" required>
                </div>

                <div class="form-group">
                    <input type="text" class="form-control formInput" name="email" placeholder="Email" value="<%= user.email %>" required>
                </div>
                
                <div class="form-group">
                    <input type="password" class="form-control formInput" name="oldPassword" placeholder="Old Password">
                </div>

                <div class="form-group">
                    <input type="password" class="form-control formInput" name="newPassword" placeholder="New Password">
                </div>

                <div class="form-group">
                    <textarea class="form-control formInput" name="bio" placeholder="Bio"><%= user.bio %></textarea>                    
                </div>

                <div class="form-group">
                    <label id="imageLabel" class="btn btn-block formInput" for="image"> Avatar <i class="fas fa-cloud-upload-alt"></i></label>
                    <input type="file" class="btn btn-block formInput" id="image" name="image" accept="image/*" style="display: none">
                </div>

                <!-- Adding the file name to the upload image label-->
                <script type="text/javascript">
                    var input = document.getElementById('image');
                    var label = document.getElementById('imageLabel');

                    input.addEventListener('change', function(){
                        if(this.value == ""){
                            label.textContent = "You must upload an Image!";
                        }else{
                            if(this.value.length > 50){
                                label.textContent = this.value.slice(12, 50) + "...";
                            }else{
                                label.textContent = this.value.slice(12);
                            }                         
                        }    
                    });
                </script>
            
                <div class="form-group">
                        <button class="btn btn-lg btn-block submitButton">Save</button>
                </div>

            </form>
            <a href="javascript:history.back()">Go Back</a>
        </div>
    </div>
<% include ../partials/footer %>